CREATE DATABASE DB_TESTE;

USE DB_TESTE;

CREATE TABLE IF NOT EXISTS CLIENTES (
  CODIGO INT NOT NULL AUTO_INCREMENT,
  NOME VARCHAR(80) NOT NULL,
  CIDADE VARCHAR(60) NULL,
  UF VARCHAR(2) NULL,
  PRIMARY KEY (CODIGO),
  UNIQUE INDEX CODIGO_UNIQUE (CODIGO ASC) VISIBLE,
  UNIQUE INDEX NOME_UNIQUE (NOME ASC) VISIBLE,
  INDEX IND_NOME (NOME ASC) VISIBLE)
ENGINE = InnoDB;

INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (1, 'José', 'Americana', 'SP');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (2, 'João', 'São Paulo', 'SP');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (3, 'Pedro', 'Campinas', 'SP');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (4, 'Marcelo', 'Porto Alegre', 'RS');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (5, 'Paulo', 'Salvador', 'BA');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (6, 'Carlos', 'Aracajú', 'SE');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (7, 'Helena', 'Amparo', 'SP');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (8, 'Alice', 'Belem', 'PA');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (9, 'Maria', 'Bonfim', 'MG');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (10, 'Isabela', 'Cavalcante', 'GO');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (11, 'Luisa', 'Caxias', 'MA');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (12, 'Julia', 'Cedro', 'CE');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (13, 'Gabriel', 'Ermo', 'SC');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (14, 'Samuel', 'Juara', 'MT');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (15, 'Piedro', 'Jaú', 'SP');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (16, 'Lucas', 'Jati', 'CE');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (17, 'Joaquim', 'Ipê', 'RS');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (18, 'Felipe', 'Graça', 'CE');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (19, 'Joana', 'Franca', 'SP');
INSERT INTO CLIENTES (CODIGO, NOME, CIDADE, UF) VALUES (20, 'Marcos', 'Flores', 'PE');

SELECT *
FROM CLIENTES;

CREATE TABLE IF NOT EXISTS PRODUTOS (
  CODIGO INT NOT NULL AUTO_INCREMENT,
  DESCRICAO VARCHAR(80) NOT NULL,
  PRECO DOUBLE NOT NULL,
  PRIMARY KEY (CODIGO),
  UNIQUE INDEX CODIGO_UNIQUE (CODIGO ASC) INVISIBLE,
  INDEX IND_DESCRICAO (DESCRICAO ASC) VISIBLE,
  UNIQUE INDEX DESCRICAO_UNIQUE (DESCRICAO ASC) VISIBLE)
ENGINE = InnoDB;

INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (1, 'Toalha de banho', 30);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (2, 'Lençol', 100);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (3, 'Fronha', 20);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (4, 'Cortina', 150);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (5, 'Coberta', 200);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (6, 'Tapete', 50);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (7, 'Camiseta', 30);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (8, 'Camisa', 50);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (9, 'Calça Jeans', 110);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (10, 'Toalha de rosto', 25);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (11, 'Lenço', 10);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (12, 'Bermuda', 60);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (13, 'Meia', 10);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (14, 'Edredon', 200);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (15, 'Vestido', 150);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (16, 'Blusa Moleton', 50);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (17, 'Blusa Malha', 70);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (18, 'Calça Moleton', 50);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (19, 'Short', 20);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, PRECO) VALUES (20, 'Cobertor', 300);

SELECT *
FROM PRODUTOS;

--DROP TABLE PEDIDOS_ITENS
--DROP TABLE PEDIDOS

CREATE TABLE IF NOT EXISTS PEDIDOS (
  CODIGO INT NOT NULL AUTO_INCREMENT,
  CODCLI INT NOT NULL,
  DATA_EMISSAO DATETIME NOT NULL,
  VL_TOTAL DOUBLE NOT NULL,
  PRIMARY KEY (CODIGO),
  UNIQUE INDEX CODIGO_UNIQUE (CODIGO ASC) VISIBLE,
  INDEX IND_CODCLI (CODCLI ASC) VISIBLE,
  CONSTRAINT CLIENTE
    FOREIGN KEY (CODCLI) REFERENCES CLIENTES (CODIGO)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS PEDIDOS_ITENS (
  CODIGO INT NOT NULL AUTO_INCREMENT,
  CODPED INT NOT NULL,
  CODPROD INT NOT NULL,
  QTDE INT NOT NULL DEFAULT 1,
  VL_UNIT DOUBLE NOT NULL,
  VL_TOTAL DOUBLE NOT NULL,
  PRIMARY KEY (CODIGO),
  UNIQUE INDEX CODIGO_UNIQUE (CODIGO ASC) VISIBLE,
  INDEX IND_CODPED (CODPED ASC) VISIBLE,
  INDEX IND_CODPROD (CODPROD ASC) VISIBLE,
  CONSTRAINT ITEM
    FOREIGN KEY (CODPROD) REFERENCES PRODUTOS (CODIGO),
    FOREIGN KEY (CODPED) REFERENCES PEDIDOS (CODIGO)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

SELECT * FROM PEDIDOS;
SELECT * FROM PEDIDOS_ITENS;

CODIGO, CODCLI, DATA_EMISSAO, VL_TOTAL
CODIGO, CODPED, CODPROD, QTDE, VL_UNIT, VL_TOTAL
